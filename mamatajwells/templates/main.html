{% extends 'base.html' %}
{% load static %}
{% block title %}Mamata Jwells{% endblock %}

{% block content %}
<div class="container my-4 text-center">

  <h2 class="fw-bold mb-2">‚ú® Mamata Jwells ‚ú®</h2>
  <p class="text-muted mb-2 small">
    Beautiful artificial jewellery ‚Äî elegant, affordable, and memorable.
  </p>

  <!-- ============================
        FILTER BOX (CATEGORY + SUBCATEGORY)
  ============================ -->
  <form method="get" class="d-flex gap-2 my-3 justify-content-center">

      <!-- Category Dropdown -->
      <select name="category" class="form-select" style="max-width:160px;"
              onchange="this.form.submit()">
          <option value="">All Categories</option>
          {% for cat in categories %}
              <option value="{{ cat.id }}"
                {% if request.GET.category == cat.id|stringformat:"s" %}selected{% endif %}>
                {{ cat.name }}
              </option>
          {% endfor %}
      </select>

      <!-- Sub Category Dropdown -->
      <select name="subcategory" class="form-select" style="max-width:160px;"
              onchange="this.form.submit()">
          <option value="">All Sub Categories</option>
          {% for sub in subcategories %}
              <option value="{{ sub.id }}"
                {% if request.GET.subcategory == sub.id|stringformat:"s" %}selected{% endif %}>
                {{ sub.name }}
              </option>
          {% endfor %}
      </select>

  </form>

  <h4 class="mt-3 mb-3 fw-semibold">Featured Picks</h4>

  <div class="row justify-content-center">

    {% for p in featured %}
    <div class="col-6 col-sm-4 col-md-3 mb-4 d-flex justify-content-center">
      <div class="card border-0 shadow-sm rounded-4" style="width:100%; max-width:180px;">
        
        {% if p.image %}
          <img src="{{ p.image.url }}" 
               class="card-img-top"
               style="height:140px; object-fit:cover; border-radius:12px 12px 0 0;">
        {% else %}
          <img src="https://via.placeholder.com/180x140"
               class="card-img-top"
               style="height:140px; object-fit:cover; border-radius:12px 12px 0 0;">
        {% endif %}

        <div class="card-body text-center p-2">
          <h6 class="fw-semibold mb-1" style="font-size:0.9rem;">{{ p.name }}</h6>
          <p class="text-muted small mb-2">‚Çπ{{ p.price }}</p>

          <a href="{% url 'mamatajwells:detail' p.id %}" 
             class="btn btn-dark btn-sm rounded-pill px-3 py-1" 
             style="font-size:0.8rem;">
            üõçÔ∏è Buy
          </a>
        </div>

      </div>
    </div>

    {% empty %}
      <p class="text-muted">No items found.</p>
    {% endfor %}

  </div>

  <a href="{% url 'mamatajwells:list' %}" 
     class="btn btn-outline-dark mt-3 rounded-pill px-4 py-1" 
     style="font-size:0.9rem;">
    Browse Full Collection
  </a>

</div>
{% endblock %}
